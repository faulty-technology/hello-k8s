# =============================================================================
# hello-k8s - Preview Environment Overrides
# =============================================================================
# These values override values-defaults.yaml for preview deployments.
# Only specify fields that differ from the defaults.
#
# Layering: chart defaults -> values-defaults.yaml -> values-preview.yaml
# =============================================================================

replicas: 1

# Primary container overrides for preview
container:
  imagePullPolicy: Always        # Always pull to get latest tag in preview
  env:
    - name: APP_NAME
      value: hello-k8s
    - name: APP_ENV
      value: preview
    # PR_NUMBER is set via --set in the workflow when available
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 250m
      memory: 256Mi

# Sidecar overrides for preview (lighter resources)
sidecars:
  nginx:
    imagePullPolicy: Always
    resources:
      requests:
        cpu: 25m
        memory: 32Mi
      limits:
        cpu: 50m
        memory: 64Mi

# Constrain preview namespace resources
resourceQuota:
  enabled: true

commonLabels:
  environment: preview
