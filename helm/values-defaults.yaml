# =============================================================================
# hello-k8s - Project-specific base values
# =============================================================================
# Base configuration for the hello-k8s project.
#
# Values layering order:
#   1. chart values.yaml (chart defaults)
#   2. helm/values-defaults.yaml (this file - project base)
#   3. helm/values-{environment}.yaml (environment overrides)
#   4. --set flags (dynamic values: tag, digest, host)
#
# Environment files override specific fields. For example, values-preview.yaml
# can override container.imagePullPolicy and container.resources without
# repeating the entire container block.
# =============================================================================

name: hello-k8s

container:
  image: ghcr.io/faulty-technology/hello-k8s
  tag: latest # overridden by CI: --set container.tag=$SHA
  port: 3000
  expose: true
  servicePort: 80
  healthPath: /health
  imagePullPolicy: IfNotPresent # overridden per-environment
  resources: # overridden per-environment
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi
  env:
    - name: APP_NAME
      value: hello-k8s

sidecars:
  nginx:
    image: nginx
    tag: latest
    port: 80
    imagePullPolicy: IfNotPresent
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi
